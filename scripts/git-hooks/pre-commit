#!/usr/bin/env bash
# Pre-commit hook to automatically remove unused imports from Python files
# To install: 
# 1. Copy this file to .git/hooks/pre-commit
# 2. Make it executable: chmod +x .git/hooks/pre-commit

set -e

echo "⏳ Running autoflake to remove unused imports..."
# Find all Python files in the repository and run autoflake on them
autoflake --remove-all-unused-imports --recursive --in-place \
  --exclude="**/node_modules/**,**/venv/**,**/.venv/**,**/.git/**" \
  --ignore-init-module-imports \
  $(find . -name "*.py")

# If autoflake made changes, force the user to re-stage
if ! git diff --exit-code --quiet; then
  echo "⚠️  autoflake cleaned up unused imports—please 'git add' the changes and re-run your commit."
  exit 1
fi 